# Milestone v1.0: MVP

**Status:** SHIPPED 2026-01-31
**Phases:** 1-5
**Total Plans:** 12

## Overview

This roadmap transforms n8n workflow JSON authoring from error-prone manual editing to type-safe TypeScript code. Starting with schema extraction from a local n8n instance, we generate TypeScript types that enforce n8n's conditional property rules, build a fluent API for workflow construction, compile to valid n8n JSON, and validate correctness with 5 representative nodes. The architecture targets 99% import success by making invalid workflows unrepresentable in the type system.

## Phases

### Phase 1: Foundation
**Goal**: TypeScript types accurately model n8n node schemas with conditional property dependencies
**Depends on**: Nothing (first phase)
**Plans**: 3 plans

Plans:
- [x] 01-01-PLAN.md — Project scaffold, schema types, extractor, and cache
- [x] 01-02-PLAN.md — Type generator with discriminated unions (TDD)
- [x] 01-03-PLAN.md — Fix schema extraction API (gap closure)

### Phase 2: SDK Core
**Goal**: Developers write workflow code using type-safe builder API with expression references
**Depends on**: Phase 1 (needs generated types)
**Plans**: 2 plans

Plans:
- [x] 02-01-PLAN.md — Expression system: node output references and template literals (TDD)
- [x] 02-02-PLAN.md — Workflow builder: workflow(), trigger(), node(), connect() (TDD)

### Phase 3: Compilation
**Goal**: TypeScript workflow code compiles to structurally valid, importable n8n JSON
**Depends on**: Phase 2 (needs builder API)
**Plans**: 2 plans

Plans:
- [x] 03-01-PLAN.md — Compiler core: types, layout, validation, compile function (TDD)
- [x] 03-02-PLAN.md — CLI build and validate commands

### Phase 4: Validation
**Goal**: Compiled workflows import and execute correctly in n8n on first try for all 5 target nodes
**Depends on**: Phase 3 (needs compiler and CLI)
**Plans**: 2 plans

Plans:
- [x] 04-01-PLAN.md — Snapshot tests for all 5 target nodes (Webhook, HTTP Request, Slack, IF, Set)
- [x] 04-02-PLAN.md — Integration tests importing compiled workflows into n8n via API

### Phase 5: Typed Node API
**Goal**: Generated TypeScript types enforce node parameter schemas at compile time via a typed node API
**Gap Closure:** Closes tech debt from v1 audit — generated/nodes.ts produced but not consumed
**Depends on**: Phase 4 (needs validated pipeline)
**Plans**: 3 plans

Plans:
- [x] 05-01-PLAN.md — Fix codegen exports, create typed node API factory, re-export from index
- [x] 05-02-PLAN.md — TDD tests for typed node API correctness and compile-time safety
- [x] 05-03-PLAN.md — Gap closure: fix codegen dedup, rewire typed-api to import generated types

---

## Milestone Summary

**Key Decisions:**
- Discriminated unions for type branching (best fit for displayOptions conditionals)
- REST API + MCP hybrid for schema access (MCP for dev exploration, REST API in CLI)
- 5-node v1 scope (prove architecture before scaling)
- Claude-first API design (optimize for AI code generation patterns)
- Proxy-based property chaining for ref() (natural syntax without codegen)
- crypto.randomUUID for node IDs (native Node.js, zero dependencies)
- API key auth for integration tests (n8n public API v1 requirement)
- Partial<> for param types (displayOptions makes required markers unreliable)

**Issues Resolved:**
- Schema extraction API endpoint incorrect (resolved: /types/nodes.json with bulk fetch)
- Builder exports removed from index.ts during expression commit (resolved: restored)
- Generated types not consumed by typed API (resolved: Phase 5 gap closure)
- Duplicate properties in codegen causing TS2300 errors (resolved: deduplication)
- Double-export keyword bug in generated/nodes.ts (resolved: codegen fix)

**Issues Deferred:**
- No negative-compilation test fixture for type error verification
- Human verification of CLI end-to-end import via n8n UI

**Technical Debt Incurred:**
- Expression test file 10 lines short of plan minimum (11 comprehensive tests cover all cases)
- Internal utility functions exported publicly (intentional for advanced users)

---
*Archived: 2026-01-31*
*For current project status, see .planning/ROADMAP.md*
