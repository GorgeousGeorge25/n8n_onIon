---
phase: 05.4-generate-typed-node-apis
plan: 03
type: execute
wave: 3
depends_on: ["05.4-02"]
files_modified:
  - SKILL.md
autonomous: true

must_haves:
  truths:
    - "Claude can read SKILL.md and know how to use createTypedNodes() for any of the 797 nodes"
    - "SKILL.md references the node catalog for discovery and shows credential usage patterns"
    - "SKILL.md accurately reflects current SDK capabilities including credentials, merge, error paths, execution testing, and 797 typed factories"
  artifacts:
    - path: "SKILL.md"
      provides: "Claude skill reference for the SDK"
      contains: "createTypedNodes"
  key_links:
    - from: "SKILL.md"
      to: "generated/node-catalog.json"
      via: "references catalog for node discovery"
      pattern: "node-catalog.json"
    - from: "SKILL.md"
      to: "src/codegen/typed-api.ts"
      via: "documents createTypedNodes() API"
      pattern: "createTypedNodes"
---

<objective>
Update SKILL.md with accurate capabilities, catalog reference, and credential usage.

Purpose: SKILL.md is Claude's primary reference for using the SDK. It must reflect the full 797-node typed API, catalog-based discovery, credential patterns, and execution testing. This is the last piece of Phase 5.4 — without it, Claude can't effectively use the generated factories.

Output:
- Updated `SKILL.md` — comprehensive Claude skill reference
</objective>

<execution_context>
@/Users/jurissleiners/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jurissleiners/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md

@SKILL.md (current version if exists)
@src/index.ts
@src/codegen/typed-api.ts
@src/builder/types.ts
@src/compiler/compiler.ts (first 30 lines for async signature)
@src/deployer/deploy.ts (first 30 lines for API)
@src/executor/test-harness.ts (first 30 lines for API)
@generated/node-catalog.json (first 100 lines for structure)
@.planning/phases/05.4-generate-typed-node-apis/05.4-01-SUMMARY.md
@.planning/phases/05.4-generate-typed-node-apis/05.4-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write comprehensive SKILL.md</name>
  <files>SKILL.md</files>
  <action>
Create or overwrite `SKILL.md` at project root. This is a Claude skill reference — optimized for AI consumption, not human documentation.

Structure:

1. **Header**: SDK name, one-line description, core value prop
2. **Quick Start Pattern**: Minimal example showing workflow -> trigger -> node -> connect -> compile -> deploy (5-10 lines of actual code)
3. **Node Discovery**: How to find nodes:
   - Read `generated/node-catalog.json` for all 797 nodes with type strings, groups, credentials, and available resources/operations
   - Use `createTypedNodes()` for compile-time checked factories
   - Pattern: `nodes.{nodeName}(name, params)` for simple nodes, `nodes.{nodeName}.{resource}.{operation}(name, params)` for resource/operation nodes
4. **API Reference**: Every public function with signature, params, return type:
   - `workflow(name)` -> WorkflowBuilder
   - `wf.trigger(name, type, params, credentials?)` -> NodeRef
   - `wf.node(name, type, params, credentials?)` -> NodeRef
   - `wf.connect(from, to, outputIndex?, inputIndex?)` -> void
   - `wf.connectError(from, to)` -> void
   - `compileWorkflow(builder)` -> Promise<N8nWorkflow> (async!)
   - `validateWorkflow(builder)` -> ValidationResult
   - `deployWorkflow(compiled, options?)` -> Promise<DeployResult>
   - `testWorkflow(builder, scenarios)` -> Promise<TestResult[]>
   - `createTypedNodes()` -> TypedNodes
   - `ref(nodeName)` -> expression reference proxy
   - `expr(template)` -> raw n8n expression
5. **Credential Patterns**: How to attach credentials:
   ```typescript
   wf.node('Slack', 'n8n-nodes-base.slack', params, {
     slackOAuth2Api: { id: '1', name: 'My Slack' }
   });
   ```
   - Credential type names are in the catalog (`credentials` field)
   - Credential IDs come from the n8n instance
6. **Common Patterns**:
   - Linear: webhook -> transform -> output
   - Branching: IF node with outputIndex 0 (true) and 1 (false)
   - Merge: multiple nodes -> Merge node with inputIndex
   - Error handling: connectError(source, errorHandler)
   - Expressions: `ref('NodeName').out.fieldName` and `expr('{{ $json.field }}')`
7. **Node Type Quick Reference**: Top 20 most-used nodes with their type strings and common params (webhook, httpRequest, if, set, code, slack, gmail, googleSheets, telegram, etc.)
8. **Gotchas**:
   - `compileWorkflow` is async (must await)
   - Resource/operation auto-injected by typed factories — don't pass them manually
   - TypeVersion handled automatically from schema registry
   - Credential IDs are instance-specific
   - Set node v3.4 uses assignments format, not legacy values

Read the actual source files to get accurate function signatures. Do NOT guess or use outdated information.
  </action>
  <verify>
  `cat SKILL.md | wc -l` — between 100-300 lines (comprehensive but not bloated).
  All function signatures in SKILL.md match actual exports in `src/index.ts`.
  The catalog reference path (`generated/node-catalog.json`) is correct.
  `createTypedNodes` usage examples are accurate.
  </verify>
  <done>
  SKILL.md exists at project root with accurate, complete SDK reference.
  Covers: node discovery via catalog, typed API usage, credentials, common patterns, gotchas.
  All function signatures verified against source code.
  </done>
</task>

</tasks>

<verification>
- SKILL.md exists and is 100-300 lines
- Quick start example uses current API (async compileWorkflow, typed nodes)
- Node catalog reference is accurate
- Credential patterns are correct
- All public API functions documented with correct signatures
</verification>

<success_criteria>
- Claude can read SKILL.md and generate a valid workflow using typed factories without any other context
- SKILL.md references node-catalog.json for discovery
- All v1.1 capabilities documented: credentials, merge, error paths, execution testing, 797 typed nodes
</success_criteria>

<output>
After completion, create `.planning/phases/05.4-generate-typed-node-apis/05.4-03-SUMMARY.md`
</output>
